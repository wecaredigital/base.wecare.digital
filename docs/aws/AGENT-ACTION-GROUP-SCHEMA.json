{
  "openapi": "3.0.0",
  "info": {
    "title": "WECARE.DIGITAL Agent Actions API",
    "version": "1.0.0",
    "description": "Action group API for internal Bedrock Agent (TJAZR473IJ)"
  },
  "paths": {
    "/send-whatsapp": {
      "post": {
        "operationId": "sendWhatsAppMessage",
        "summary": "Send WhatsApp message to a contact",
        "description": "Send a WhatsApp message to a contact by contact ID or phone number",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contactId": {
                    "type": "string",
                    "description": "The contact ID to send message to"
                  },
                  "phone": {
                    "type": "string",
                    "description": "Phone number if contact ID not provided"
                  },
                  "message": {
                    "type": "string",
                    "description": "The message content to send"
                  }
                },
                "required": ["message"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Message sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "messageId": { "type": "string" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/send-sms": {
      "post": {
        "operationId": "sendSmsMessage",
        "summary": "Send SMS to a contact",
        "description": "Send an SMS message to a contact by contact ID or phone number",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contactId": {
                    "type": "string",
                    "description": "The contact ID to send SMS to"
                  },
                  "phone": {
                    "type": "string",
                    "description": "Phone number if contact ID not provided"
                  },
                  "message": {
                    "type": "string",
                    "description": "The SMS content to send"
                  }
                },
                "required": ["message"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "SMS sent successfully"
          }
        }
      }
    },
    "/send-email": {
      "post": {
        "operationId": "sendEmail",
        "summary": "Send email to a contact",
        "description": "Send an email to a contact by contact ID or email address",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contactId": {
                    "type": "string",
                    "description": "The contact ID to send email to"
                  },
                  "email": {
                    "type": "string",
                    "description": "Email address if contact ID not provided"
                  },
                  "subject": {
                    "type": "string",
                    "description": "Email subject line"
                  },
                  "message": {
                    "type": "string",
                    "description": "The email body content"
                  }
                },
                "required": ["message"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email sent successfully"
          }
        }
      }
    },
    "/create-contact": {
      "post": {
        "operationId": "createContact",
        "summary": "Create a new contact",
        "description": "Create a new contact with name, phone, and/or email",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Contact name"
                  },
                  "phone": {
                    "type": "string",
                    "description": "Contact phone number"
                  },
                  "email": {
                    "type": "string",
                    "description": "Contact email address"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contact created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "contactId": { "type": "string" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/update-contact": {
      "post": {
        "operationId": "updateContact",
        "summary": "Update an existing contact",
        "description": "Update contact details by contact ID",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contactId": {
                    "type": "string",
                    "description": "The contact ID to update"
                  },
                  "name": {
                    "type": "string",
                    "description": "New contact name"
                  },
                  "phone": {
                    "type": "string",
                    "description": "New phone number"
                  },
                  "email": {
                    "type": "string",
                    "description": "New email address"
                  }
                },
                "required": ["contactId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contact updated successfully"
          }
        }
      }
    },
    "/delete-contact": {
      "post": {
        "operationId": "deleteContact",
        "summary": "Delete a contact",
        "description": "Delete a contact by contact ID (soft delete)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contactId": {
                    "type": "string",
                    "description": "The contact ID to delete"
                  }
                },
                "required": ["contactId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contact deleted successfully"
          }
        }
      }
    },
    "/search-contacts": {
      "post": {
        "operationId": "searchContacts",
        "summary": "Search contacts",
        "description": "Search contacts by name, phone, or email",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "query": {
                    "type": "string",
                    "description": "Search query (name, phone, or email)"
                  }
                },
                "required": ["query"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "count": { "type": "integer" },
                    "contacts": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string" },
                          "name": { "type": "string" },
                          "phone": { "type": "string" },
                          "email": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/get-contact": {
      "post": {
        "operationId": "getContact",
        "summary": "Get contact details",
        "description": "Get contact details by contact ID or phone number",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contactId": {
                    "type": "string",
                    "description": "The contact ID"
                  },
                  "phone": {
                    "type": "string",
                    "description": "Phone number to look up"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contact details"
          }
        }
      }
    },
    "/delete-message": {
      "post": {
        "operationId": "deleteMessage",
        "summary": "Delete a message",
        "description": "Delete a message by message ID",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "messageId": {
                    "type": "string",
                    "description": "The message ID to delete"
                  }
                },
                "required": ["messageId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Message deleted successfully"
          }
        }
      }
    },
    "/get-messages": {
      "post": {
        "operationId": "getMessages",
        "summary": "Get messages for a contact",
        "description": "Get message history for a contact",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contactId": {
                    "type": "string",
                    "description": "The contact ID to get messages for"
                  },
                  "limit": {
                    "type": "integer",
                    "description": "Maximum number of messages to return (default 10)"
                  }
                },
                "required": ["contactId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Message list"
          }
        }
      }
    },
    "/create-invoice": {
      "post": {
        "operationId": "createInvoice",
        "summary": "Create an invoice",
        "description": "Create an invoice for a contact",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contactId": {
                    "type": "string",
                    "description": "The contact ID for the invoice"
                  },
                  "amount": {
                    "type": "string",
                    "description": "Invoice amount"
                  },
                  "description": {
                    "type": "string",
                    "description": "Invoice description"
                  }
                },
                "required": ["contactId", "amount"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invoice created successfully"
          }
        }
      }
    },
    "/get-stats": {
      "post": {
        "operationId": "getStats",
        "summary": "Get dashboard statistics",
        "description": "Get statistics about contacts and messages",
        "responses": {
          "200": {
            "description": "Dashboard statistics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "stats": {
                      "type": "object",
                      "properties": {
                        "totalContacts": { "type": "integer" },
                        "totalInboundMessages": { "type": "integer" },
                        "totalOutboundMessages": { "type": "integer" },
                        "totalMessages": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
